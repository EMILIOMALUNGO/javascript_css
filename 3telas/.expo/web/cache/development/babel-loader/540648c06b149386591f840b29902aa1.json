{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect } from 'react';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var AuthContext = React.createContext();\nexport var AuthProvider = function AuthProvider(_ref) {\n  var children = _ref.children;\n\n  var _React$useState = React.useState(null),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      user = _React$useState2[0],\n      setUser = _React$useState2[1];\n\n  var login = function () {\n    var _ref2 = _asyncToGenerator(function* (email, password) {\n      if (email == \"emilio.malungo@hotmail.com\" && password == \"123\") {\n        var v = {\n          email: \"emilio.malungo@hotmail.com\",\n          name: \"senha\"\n        };\n\n        try {\n          yield AsyncStorage.setItem('user', JSON.stringify(v));\n        } catch (err) {\n          console.log(err);\n        }\n\n        setUser(v);\n      } else {\n        setUser(null);\n        throw new Error(\"Usu치rio ou senha inv치lidos!\");\n      }\n    });\n\n    return function login(_x, _x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var logout = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      setUser(null);\n\n      try {\n        yield AsyncStorage.setItem('user', null);\n      } catch (err) {\n        console.log(\"ERRO\", err);\n        console.log(err);\n      }\n    });\n\n    return function logout() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var carregar = function () {\n    var _ref4 = _asyncToGenerator(function* () {\n      try {\n        var v = yield AsyncStorage.getItem('user');\n        console.log(\"v\", v);\n        setUser(v != null ? JSON.parse(v) : null);\n      } catch (err) {\n        console.log(\"ERRO\", err);\n        console.log(err);\n      }\n    });\n\n    return function carregar() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    carregar();\n    console.log(\"MONTAR\");\n    return function () {};\n  }, []);\n  console.log(\"USER\", user);\n  var authorized = user != null;\n  return _jsx(AuthContext.Provider, {\n    value: {\n      user: user,\n      authorized: authorized,\n      login: login,\n      logout: logout\n    },\n    children: children\n  });\n};","map":{"version":3,"names":["React","useEffect","AsyncStorage","AuthContext","createContext","AuthProvider","children","useState","user","setUser","login","email","password","v","name","setItem","JSON","stringify","err","console","log","Error","logout","carregar","getItem","parse","authorized"],"sources":["C:/Users/Emilio/Desktop/Backup/Documentos/documento.Bakongo.projeto/3telas/src/contexts/Auth.js"],"sourcesContent":["\r\nimport React, { useEffect } from 'react';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\n\r\n\r\n\r\nexport const AuthContext = React.createContext();\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n\r\n    const [user, setUser] = React.useState(null);\r\n\r\n    const login = async (email, password) => {\r\n        if (email == \"emilio.malungo@hotmail.com\" && password == \"123\") {\r\n            const v = {\r\n                email: \"emilio.malungo@hotmail.com\",\r\n                name: \"senha\"\r\n            };\r\n\r\n            try {\r\n                await AsyncStorage.setItem('user', JSON.stringify(v));\r\n            }\r\n            catch (err) {\r\n                console.log(err);\r\n            }\r\n            setUser(v);\r\n\r\n            \r\n        }\r\n\r\n        else {\r\n            setUser(null);\r\n            throw new Error(\"Usu치rio ou senha inv치lidos!\")\r\n        }\r\n    }\r\n\r\n    const logout = async () => {\r\n        setUser(null);\r\n        try {\r\n            await AsyncStorage.setItem('user', null);\r\n        }\r\n        catch (err) {\r\n            console.log(\"ERRO\", err);\r\n            console.log(err);\r\n        }\r\n    }\r\n    const carregar = async () => {\r\n        try {\r\n            const v = await AsyncStorage.getItem('user');\r\n            console.log(\"v\",v)\r\n            setUser(v != null ? JSON.parse(v) : null);\r\n        }\r\n        catch (err) {\r\n            console.log(\"ERRO\", err);\r\n            //setUser(null);\r\n            console.log(err);\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        carregar();\r\n        console.log(\"MONTAR\");\r\n        return () => {\r\n\r\n        }\r\n    }, []);\r\n\r\n    console.log(\"USER\", user);\r\n    const authorized = user != null;\r\n\r\n    return (\r\n        <AuthContext.Provider value={{ user, authorized, login, logout }}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    )\r\n}"],"mappings":";;AACA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,YAAP,MAAyB,2CAAzB;;AAIA,OAAO,IAAMC,WAAW,GAAGH,KAAK,CAACI,aAAN,EAApB;AAEP,OAAO,IAAMC,YAAY,GAAG,SAAfA,YAAe,OAAkB;EAAA,IAAfC,QAAe,QAAfA,QAAe;;EAE1C,sBAAwBN,KAAK,CAACO,QAAN,CAAe,IAAf,CAAxB;EAAA;EAAA,IAAOC,IAAP;EAAA,IAAaC,OAAb;;EAEA,IAAMC,KAAK;IAAA,8BAAG,WAAOC,KAAP,EAAcC,QAAd,EAA2B;MACrC,IAAID,KAAK,IAAI,4BAAT,IAAyCC,QAAQ,IAAI,KAAzD,EAAgE;QAC5D,IAAMC,CAAC,GAAG;UACNF,KAAK,EAAE,4BADD;UAENG,IAAI,EAAE;QAFA,CAAV;;QAKA,IAAI;UACA,MAAMZ,YAAY,CAACa,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeJ,CAAf,CAA7B,CAAN;QACH,CAFD,CAGA,OAAOK,GAAP,EAAY;UACRC,OAAO,CAACC,GAAR,CAAYF,GAAZ;QACH;;QACDT,OAAO,CAACI,CAAD,CAAP;MAGH,CAfD,MAiBK;QACDJ,OAAO,CAAC,IAAD,CAAP;QACA,MAAM,IAAIY,KAAJ,CAAU,6BAAV,CAAN;MACH;IACJ,CAtBU;;IAAA,gBAALX,KAAK;MAAA;IAAA;EAAA,GAAX;;EAwBA,IAAMY,MAAM;IAAA,8BAAG,aAAY;MACvBb,OAAO,CAAC,IAAD,CAAP;;MACA,IAAI;QACA,MAAMP,YAAY,CAACa,OAAb,CAAqB,MAArB,EAA6B,IAA7B,CAAN;MACH,CAFD,CAGA,OAAOG,GAAP,EAAY;QACRC,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBF,GAApB;QACAC,OAAO,CAACC,GAAR,CAAYF,GAAZ;MACH;IACJ,CATW;;IAAA,gBAANI,MAAM;MAAA;IAAA;EAAA,GAAZ;;EAUA,IAAMC,QAAQ;IAAA,8BAAG,aAAY;MACzB,IAAI;QACA,IAAMV,CAAC,SAASX,YAAY,CAACsB,OAAb,CAAqB,MAArB,CAAhB;QACAL,OAAO,CAACC,GAAR,CAAY,GAAZ,EAAgBP,CAAhB;QACAJ,OAAO,CAACI,CAAC,IAAI,IAAL,GAAYG,IAAI,CAACS,KAAL,CAAWZ,CAAX,CAAZ,GAA4B,IAA7B,CAAP;MACH,CAJD,CAKA,OAAOK,GAAP,EAAY;QACRC,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBF,GAApB;QAEAC,OAAO,CAACC,GAAR,CAAYF,GAAZ;MACH;IACJ,CAXa;;IAAA,gBAARK,QAAQ;MAAA;IAAA;EAAA,GAAd;;EAaAtB,SAAS,CAAC,YAAM;IACZsB,QAAQ;IACRJ,OAAO,CAACC,GAAR,CAAY,QAAZ;IACA,OAAO,YAAM,CAEZ,CAFD;EAGH,CANQ,EAMN,EANM,CAAT;EAQAD,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBZ,IAApB;EACA,IAAMkB,UAAU,GAAGlB,IAAI,IAAI,IAA3B;EAEA,OACI,KAAC,WAAD,CAAa,QAAb;IAAsB,KAAK,EAAE;MAAEA,IAAI,EAAJA,IAAF;MAAQkB,UAAU,EAAVA,UAAR;MAAoBhB,KAAK,EAALA,KAApB;MAA2BY,MAAM,EAANA;IAA3B,CAA7B;IAAA,UACKhB;EADL,EADJ;AAKH,CAnEM"},"metadata":{},"sourceType":"module"}