{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from \"react\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var AuthContext = React.createContext();\nexport var AuthProvider = function AuthProvider(_ref) {\n  var children = _ref.children;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    user = _useState2[0],\n    setUser = _useState2[1];\n  var login = function () {\n    var _ref2 = _asyncToGenerator(function* (email, password) {\n      if (email == \"a@a.com\" && password == \"123\") {\n        var _user = {\n          email: \"a@a.com\",\n          name: \"joselito\"\n        };\n        setUser(_user);\n        try {\n          yield AsyncStorage.setItem('user', JSON.stringify(_user));\n        } catch (err) {\n          setUser(null);\n          console.log(err);\n        }\n      } else {\n        setUser(null);\n        throw new Error(\"Usu치rio ou senha inv치lidos!\");\n      }\n    });\n    return function login(_x, _x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var logout = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      try {\n        yield AsyncStorage.setItem('user', null);\n      } catch (err) {\n        setUser(null);\n        console.log(err);\n      }\n    });\n    return function logout() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var read = function () {\n    var _ref4 = _asyncToGenerator(function* () {\n      try {\n        var r = yield AsyncStorage.getItem('user');\n        setUser(r != null ? JSON.parse(r) : null);\n      } catch (err) {\n        setUser(null);\n        console.log(err);\n      }\n    });\n    return function read() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  var authorized = user != null;\n  useEffect(function () {\n    read();\n  }, []);\n  return _jsx(AuthContext.Provider, {\n    value: {\n      user: user,\n      authorized: authorized,\n      login: login,\n      logout: logout\n    },\n    children: children\n  });\n};","map":{"version":3,"names":["React","useEffect","useState","AsyncStorage","AuthContext","createContext","AuthProvider","children","user","setUser","login","email","password","name","setItem","JSON","stringify","err","console","log","Error","logout","read","r","getItem","parse","authorized"],"sources":["C:/Users/moises.psilva5/Desktop/Projetos/projeto_final/todoList/context/Auth.js"],"sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\n\r\nexport const AuthContext = React.createContext()\r\n\r\nexport const AuthProvider = ({children}) => {\r\n    const [user, setUser] = useState(null)\r\n\r\n    const login = async (email, password) => {\r\n        if(email == \"a@a.com\" && password ==\"123\"){\r\n            const user= {\r\n                email: \"a@a.com\",\r\n                name: \"joselito\"\r\n            }\r\n            setUser(user)\r\n            try{\r\n                await AsyncStorage.setItem('user', JSON.stringify(user))\r\n            }catch(err){\r\n                setUser(null)\r\n                console.log(err)\r\n            }\r\n        }\r\n        else {\r\n            setUser(null);\r\n            throw new Error(\"Usu치rio ou senha inv치lidos!\");\r\n        }\r\n    }\r\n\r\n    const logout = async () => {\r\n        try{\r\n            await AsyncStorage.setItem('user',  null)\r\n        }catch(err){\r\n            setUser(null)\r\n            console.log(err)\r\n        }\r\n    }\r\n\r\n    const read = async () => {\r\n        try{\r\n         const r = await AsyncStorage.getItem('user')\r\n            setUser( r != null ? JSON.parse(r) : null)\r\n        }catch(err){\r\n            setUser(null)\r\n            console.log(err)\r\n        }\r\n    }\r\n\r\n    const authorized = user != null\r\n    \r\n    useEffect(() => {\r\n        read()\r\n    }, [])\r\n\r\n    return (\r\n        <AuthContext.Provider value={{user, authorized, login, logout}}>\r\n            { children }\r\n        </AuthContext.Provider>\r\n    )\r\n}"],"mappings":";;AAAA,OAAOA,KAAK,IAAGC,SAAS,EAAEC,QAAQ,QAAO,OAAO;AAChD,OAAOC,YAAY,MAAM,2CAA2C;AAAC;AAErE,OAAO,IAAMC,WAAW,GAAGJ,KAAK,CAACK,aAAa,EAAE;AAEhD,OAAO,IAAMC,YAAY,GAAG,SAAfA,YAAY,OAAmB;EAAA,IAAdC,QAAQ,QAARA,QAAQ;EAClC,gBAAwBL,QAAQ,CAAC,IAAI,CAAC;IAAA;IAA/BM,IAAI;IAAEC,OAAO;EAEpB,IAAMC,KAAK;IAAA,8BAAG,WAAOC,KAAK,EAAEC,QAAQ,EAAK;MACrC,IAAGD,KAAK,IAAI,SAAS,IAAIC,QAAQ,IAAG,KAAK,EAAC;QACtC,IAAMJ,KAAI,GAAE;UACRG,KAAK,EAAE,SAAS;UAChBE,IAAI,EAAE;QACV,CAAC;QACDJ,OAAO,CAACD,KAAI,CAAC;QACb,IAAG;UACC,MAAML,YAAY,CAACW,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAACR,KAAI,CAAC,CAAC;QAC5D,CAAC,QAAMS,GAAG,EAAC;UACPR,OAAO,CAAC,IAAI,CAAC;UACbS,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;QACpB;MACJ,CAAC,MACI;QACDR,OAAO,CAAC,IAAI,CAAC;QACb,MAAM,IAAIW,KAAK,CAAC,6BAA6B,CAAC;MAClD;IACJ,CAAC;IAAA,gBAlBKV,KAAK;MAAA;IAAA;EAAA,GAkBV;EAED,IAAMW,MAAM;IAAA,8BAAG,aAAY;MACvB,IAAG;QACC,MAAMlB,YAAY,CAACW,OAAO,CAAC,MAAM,EAAG,IAAI,CAAC;MAC7C,CAAC,QAAMG,GAAG,EAAC;QACPR,OAAO,CAAC,IAAI,CAAC;QACbS,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;MACpB;IACJ,CAAC;IAAA,gBAPKI,MAAM;MAAA;IAAA;EAAA,GAOX;EAED,IAAMC,IAAI;IAAA,8BAAG,aAAY;MACrB,IAAG;QACF,IAAMC,CAAC,SAASpB,YAAY,CAACqB,OAAO,CAAC,MAAM,CAAC;QACzCf,OAAO,CAAEc,CAAC,IAAI,IAAI,GAAGR,IAAI,CAACU,KAAK,CAACF,CAAC,CAAC,GAAG,IAAI,CAAC;MAC9C,CAAC,QAAMN,GAAG,EAAC;QACPR,OAAO,CAAC,IAAI,CAAC;QACbS,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;MACpB;IACJ,CAAC;IAAA,gBARKK,IAAI;MAAA;IAAA;EAAA,GAQT;EAED,IAAMI,UAAU,GAAGlB,IAAI,IAAI,IAAI;EAE/BP,SAAS,CAAC,YAAM;IACZqB,IAAI,EAAE;EACV,CAAC,EAAE,EAAE,CAAC;EAEN,OACI,KAAC,WAAW,CAAC,QAAQ;IAAC,KAAK,EAAE;MAACd,IAAI,EAAJA,IAAI;MAAEkB,UAAU,EAAVA,UAAU;MAAEhB,KAAK,EAALA,KAAK;MAAEW,MAAM,EAANA;IAAM,CAAE;IAAA,UACzDd;EAAQ,EACS;AAE/B,CAAC"},"metadata":{},"sourceType":"module"}